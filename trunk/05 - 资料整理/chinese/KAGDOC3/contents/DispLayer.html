<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh">
<!-- generated by to_html.pl from DispLayer.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>前景的显示</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="åéåéç¸å³æ ååèæ ·å¼" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="é¦é¡µ" />
</head>
<body>
<h1><a id="id34" name="id34">前景</a>
</h1><div class="para"><div>
　前景・・・总之就是，人物图像之类的，在背景层和消息层中间显示的东西。KAG 的默认设定中，前景层有 3 层。 ( 自己设定的话，还可以有更多层 )。<br />
<br />
　前景，为了显示出形状不规则的图像，必须使用遮罩或者透明色(colorkey)之类的方法。KAG 拥有使用遮罩和指定透明色两种画像显示方式。如果使用的是 PNG ， ERI 或者 TLG5/TLG6 一类本身就带alpha channel的图片格式，那么将以图片自带的透明通道信息为准。<br />
</div></div>
<h1><a id="id35" name="id35">使用透明色方式的前景</a>
</h1><div class="para"><div>
　透明色就是，把想要透明的部分统一涂上某种颜色，只要涂上这种颜色的部分，将不被显示出来——这样的东西。<br />
　当图片为全彩色（full color）， 256 色或 16 色的情况，可能有少许的不同。<br />
<br />
　全彩色的情况，也就是把「用不到」的颜色「<a id="id36" name="id36" class="targanchor"><dfn>透明色</dfn></a>」( colorkey ) ，填充图片上想要透明的部分。一般来说，经常使用的透明色是纯紫色 (r,g,b)=(255,0,255) 或者纯绿色 (r,g,b)=(0,255,0) 。<br />
　但是这么做的话，不想透明的部分需要用到纯紫色或者纯绿色怎么办呢？那样的话，就使用(r,g,b)=(254,0,255) 或者 (r,g,b)=(0,254,0) 这样的颜色吧， KAG 会把这当做不透明的颜色看待的（虽然人眼是分辨不出来）。<br />
<br />
　256 色的图片，或者 16 色的图片，在<a id="id37" name="id37" class="targanchor"><dfn>调色盘</dfn></a>里选择一种作为「透明色」。这个颜色填充的部分将被透明。<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　PNG 之类的图片格式，有些已经保存有<a id="id38" name="id38" class="targanchor"><dfn>透明色</dfn></a>(colorkey)的信息了，带有半透明之类的柔化效果的 PNG 格式也是支持的。</div><br />
<br />
<br /><div class="descimg"><img src="../j/contents/ButtonGlyphImageList.png" alt="../j/contents/ButtonGlyphImageList.png" /><br />透明色的范例</div><br /></div></div>
<h1><a id="id39" name="id39">使用遮罩(mask)透明方式的前景</a>
</h1><div class="para"><div>
　KAG 中，可以使用和普通和前景图片不同，被叫做遮罩图片的东西，根据这种遮罩图片，可以把前景画像&quot;剪&quot;出一定的形状来。<br />
<br />
　<a id="id40" name="id40" class="targanchor"><dfn>遮罩图片</dfn></a>是和其对应的前景图片同样大小的， 256 阶灰度(gray scale)的图片、这张图片中，亮度的等级对应着「不透明度」。也就是说，亮度为 0 的部分是「全透明」，而亮度 255 的部分是「全不透明」。128 左右的亮度代表「半透明」这样。把前景图片上想要显示出来的部分，在遮罩图片的相应位置涂白，想要透明的部分涂黑。<br />
　遮罩图片请务必存储成 256 阶灰度(gray scale) ( 256 色图片 ) 。如果存成 全彩色 或 16色 将无法正常显示。<br />
　遮罩图片是记录不透明度信息的图片，和该遮罩图片对应的前景图片则记录着颜色信息。这种情况下，把前景图片称呼为<a id="id41" name="id41" class="targanchor"><dfn>主图片</dfn></a>。<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　PNG或者ERI、TLG5/TLG6 形式的图片，单张 PNG/ERI/TLG5 图片，已经包含了 <a id="id42" name="id42" class="targanchor"><dfn>alpha channel</dfn></a> ( 也就是遮罩信息 ) 了。<br />
　使用能够输出这类型图片的软件 ( PNG 或 GIMP 等 )的话，就不用特别制作遮罩图片了。此外，吉里吉里 SDK 内附有图片格式转换器，可以很轻松地进行这些图片格式之间的转换。</div><br />
<br />
　遮罩图片的命名，请在对应主图片的文件名之后加入 _m 。例如主图片名叫 hogehoge.png ，对应的遮罩图片则应该起名为 hogehoge_m.png 。这种遮罩图片和主图片分离的方法，被称为「主/遮罩分离形式」。（拖鞋译注：引擎 Nscripter 使用的则是「主/遮罩合并形式」吧……XD）<br />
<br />
　使用遮罩图片的好处在于，叠加前景的时候可以自由地指定任何一点的不透明度。处理恰当的遮罩图片和主图片将可以不留痕迹地融合进游戏画面中。<br />
<br /><div class="descimg"><img src="../j/contents/ayari.png" alt="../j/contents/ayari.png" /><img src="../j/contents/ayari_m.png" alt="../j/contents/ayari_m.png" /><br />遮罩范例 ( 左为主图片、右为遮罩图片 )</div><br /></div></div>
<h1><a id="id43" name="id43">前景的显示</a>
</h1><div class="para"><div>
　で那么，就像这样，准备好适当的图片吧 ( 图片请自行准备... )。首先，是指定透明色的显示方法・・・。<br />

<br />
<code class="bq">[image&nbsp;storage=&quot;bg0&quot;&nbsp;page=fore&nbsp;layer=base]<br />
[wait&nbsp;time=200]<br />
*start|スタート<br />
[cm]<br />
<em>[image&nbsp;layer=0&nbsp;page=fore&nbsp;storage=&quot;as&quot;&nbsp;visible=true&nbsp;key=0xff00ff&nbsp;left=340&nbsp;top=100]</em><br />
你好。<br />
</code>
<br />

　使用粗体的部分就是用于显示前景的指令。<a id="id44" name="id44" class="targanchor"><dfn>image</dfn></a> 指令，在教程 <a target="main" class="jump" href="DispBase.html">背景的显示</a> 已经出现过了。是用于载入图片的指令。layer 的值为 0 ，也就是指定图片在 0 号前景层上显示。<br />
　
　这里，有一个 key 属性。key 属性是用来指定透明色的。像这种 0xRRGGBB 的形式，即 16 进制透明色指定，格式为RR(红) GG(绿) BB(蓝)，指定的颜色填充的地方将被透明。例如，key=0xff00ff 就是 (r,g,b)=(255,0,255) 也就是指定了纯紫色为透明色。如果，key=255 这么指定的话， 对应图片&quot;调色板&quot;上编号为 255 的颜色将成为透明色。详细说明请参考 <a target="main" class="jump" href="Tags.html">Reference</a> 部分。<br />
<br />
　storage=&quot;as&quot; 这样，就是读入一张名为 as 的图片。不写明扩展名也没关系。这种情况下, KAG 会自动搜索名为 as 的可用图片并载入。<br />
<br />
　visible=true 这么写是因为，KAG 的前景层在默认情况下是不显示的，不修改这个属性为 true 的话，即使载入图片也无法显示出来。<br />
<br />
　left=340 top=100 ，用于指定前景层的左端位置和上端位置。前景层的位置可以在 image 指令读入的时候设定（拖鞋译注：另外一个办法就是用 layopt 指令设定位置啦）。<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　PNG 图片格式的情况，透明色指定无效。</div><br />
<br />
　此外，使用遮罩图片的情况下，变为以下写法。<br />

<br />
<code class="bq">[image&nbsp;storage=&quot;bg0&quot;&nbsp;page=fore&nbsp;layer=base]<br />
[wait&nbsp;time=200]<br />
*start|スタート<br />
[cm]<br />
<em>[image&nbsp;layer=0&nbsp;page=fore&nbsp;storage=&quot;asm&quot;&nbsp;visible=true&nbsp;left=340&nbsp;top=100]</em><br />
你好。<br />
</code>
<br />

　只是不需要加入 key 属性。<br />
　这种情况，同时读入的将有以 asm_m 为名的遮罩图片，及以 asm 为名的主图片。<br />
<br />
　PNG ，自带有透明通道信息或透明色的情况下，和上一例一样，不需要 key 属性。<br />
<br /><div class="descimg"><img src="../j/contents/LayerDisplayed.jpg" alt="../j/contents/LayerDisplayed.jpg" /><br />执行结果</div><br /></div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
