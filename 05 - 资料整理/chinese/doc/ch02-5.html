<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>2.5. 关于KAGeXpress附带的工具使用</title>
<link rel="stylesheet" href="css/style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
<link rel="start" href="index.html" title="KCDDP KAGeXpress 3.0 使用手册">
<link rel="up" href="ch02.html" title="第 2 章 基本概念">
<link rel="prev" href="ch02-4.html" title="2.4. KAG的图层结构">
<link rel="next" href="ch02-6.html" title="2.6. 关于KAG工程的一些说明">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">2.5. 关于KAGeXpress附带的工具使用</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch02-4.html">上一页</a> </td>
<th width="60%" align="center">第 2 章 基本概念</th>
<td width="20%" align="right"> <a accesskey="n" href="ch02-6.html">下一页</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1" lang="zh-CN">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="ch02-5"></a>2.5. 关于KAGeXpress附带的工具使用</h2></div></div></div>
<div class="sect2" lang="zh-CN">
<div class="titlepage"><div><div><h3 class="title">
<a name="ch02-5-1"></a>2.5.1. 吉里吉里附带的工具使用</h3></div></div></div>
<p></p>
</div>
<div class="sect2" lang="zh-CN">
<div class="titlepage"><div><div><h3 class="title">
<a name="ch02-5-2"></a>2.5.2. KAGConfig 使用说明</h3></div></div></div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-2-1"></a>2.5.2.1. 功能特性及要求</h4></div></div></div>
<p>该工具对应2.26版吉里吉里2中的Config.tjs文件，在配合更高版本的Config.tjs文件使用时不会出现错误，但是无法编辑高版本文件中新增的参数。</p>
<p>该工具为简体中文版，在其他语言环境中运行时仍保持简体中文界面，不会出现乱码(缺少对应字体时除外)。</p>
<p>该工具在任何语言环境下都支持Unicode格式的Config.tjs文件，同时，在简体中文环境下支持GB2312格式的Config.tjs文件，在繁体中文环境下支持BIG5格式的Config.tjs文件，在日文环境下支持Shift-JIS格式的Config.tjs文件。</p>
<p>该工具支持用户追加参数的设定，同时支持添加户追加参数的行末注释，但无法添加整行注释。对于固有参数则会保留所有整行和行末注释，无法修改。</p>
<p>该工具的本体只包含一个可执行文件(KAGConfig.exe)，无需安装和卸载，且不会主动向系统目录或注册表中添加任何东西。</p>
<p>该工具要求Windows2000或以上操作系统，1024*768或以上分辨率(低于此分辨率时无法显示完整的窗口)。</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-2-2"></a>2.5.2.2. Config.tjs文件的读入</h4></div></div></div>
<p>启动本程序后会看到如下的窗口，窗口上会显示一行提示：“把Config.tjs扔到这里来”。此时用鼠标将Config.tjs文件拖到该窗口上，就可读入该文件。除此之外还有两个按钮，“保存”和“退出”。在Config.tjs文件读入之前点击“保存”按钮是没有效果的。在任何时候点击“退出”按钮都会关闭本工具。</p>
<p>文件读入后窗口中会显示出各个功能模块的编辑界面(如下图)，默认显示的是全局参数的编辑页面，点击上方的选项卡可以切换到其他参数的编辑界面。编辑界面共有6个，分别为“全局”、“窗口与系统”、“菜单”、“文字层”、“声音”、“文字履历”。此时即可开始修改各个界面中显示的参数。当点击“保存”按钮时，当前各个编辑界面的参数就会保存到当初读入的Config.tjs文件中(覆盖掉旧的数据)，若点击“退出”按钮则在上一次保存之后做的修改不会写入Config.tjs文件。在退出之前请确保您已经保存了您想要更改的内容。</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-2-3"></a>2.5.2.3. “全局”编辑界面</h4></div></div></div>
<p>“游戏标题”这一参数用来指定窗口的标题栏及任务栏将显示的文字。</p>
<p>“游戏中的文字不随脚本中的换行符而换行”这一选项未选中的话，KAG的剧本中的分行将在行末没有书写\或者[p]的情况下作为文字层的换行，若将其选中则在没有执行到[r]的情况下不会换行。若要保持和KAG2.x的兼容性，请不要选中该项。此选项默认设置为选中。</p>
<p>如果你使用的字体不常见或字体在使用的时候出现异常则推荐使用预渲染文字，详细可以参看KAGeXpress和KAG文档。如果使用了预渲染字体，请选中“使用预渲染文字”这一选项，并填写后面的字体文件名。默认设置为不使用预渲染文字，既不选中“使用预渲染文字”选项。</p>
<p>“图像缓存大小”这一参数可以让使用KAG系统的开发者手动设置图像缓冲的大小限制，默认设置为自动，若设置为手动，则可填写以MB为单位的缓存大小数值。</p>
<p>这一界面的下半部分是用户追加参数的设定区域，详情请阅读 2.8 用户追加参数编辑界面</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-2-4"></a>2.5.2.4. “窗口与系统”编辑界面</h4></div></div></div>
<p>在“游戏画面的尺寸”这一位置用来以像素为单位设置窗口的宽度和高度，如果不设定为类似于 640x480 或 800x600 这样的标准画面大小，可能无法切换为全屏。</p>
<p>如果选中“只读模式”选项，则将不会向硬盘上写入东西。如果想让游戏在CD-ROM等媒介上执行请指定这个选项。当然，这种情况下将无法保存存档。默认设置为不选中。</p>
<p>如果选中“存档文件名由用户指定”选项，则存档、读档时将打开选择文件的对话框。这种情况下最大保存存档个数没有限制。如果未选中这一选项，则存档文件按照编号统一处理，无需手动指定文件名。这时最大存档数量取决于“存档数量上限”这一参数。默认设置为不选中。</p>
<p>如果选中“存档时保存缩略图”选项，则存档数据扩展名将是.bmp，其中将保存存档时的缩略图。自由存档模式下打开文件对话框将可以预览该缩略图。如果未选中这一选项，则存档数据的扩展名将是.kdt，不保存缩略图。默认设置为不选中。为在选中“存档时保存缩略图”选项的情况下，可以通过设置后面的“宽度”参数来指定缩略图的宽度(单位为像素，默认值为133)，缩略图的高度将自动按照游戏窗口的长宽比计算。同时可以通过设置后面的“色深”参数来指定缩略图的保存模式，指定为8位则将存为256色位图，指定为24则将存为24位色位图。指定为256色位图虽然可以大幅度减小文件大小，但画质也将变差(默认为8位)。若不选中“存档时保存缩略图”选项，则不需要设置“宽度”和“色深”两个参数。</p>
<p>通过设置“存档文件路径”这组参数用来指定保存游戏存档文件的文件夹名称和位置。下拉列表用于选择存档文件夹的位置，可选择的位置有游戏主目录下、「我的文档」下和「Application Data」文件夹下。后面的文字框用来指定存档文件夹的名称，如果选择了「我的文档」下或「Application Data」文件夹下，请确保该名称不与「我的文档」下或「Application Data」文件夹下的其他文件夹重复。此外，即使设置了“存档文件名由用户指定”选项，为了记录系统设定和系统变量等也必须指定这个参数。该参数的默认设置为游戏主目录下的“savedata”文件夹。</p>
<p>“存档文件名前缀”这一参数用来对存档文件进行自动命名，以该参数为前缀，后面接数字序号。即使设置了“存档文件名由用户指定”选项，这一参数也会影响到系统变量等存档文件。默认为“data”。</p>
<p>“存档文件识别ID”这一参数用来区别同样使用KAG系统开发的多个游戏的存档文件。如果设置了“存档文件名由用户指定”选项，则该参数特别重要，此外的场合就不是那么关键了。默认为“00000000-0000-0000-0000-000000000000”。如果设置了“存档文件名由用户指定”选项，请不要使用默认值。
不重复的ID号可以通过以下连接获得：
http://kikyou.info/uuidgen/uuidgen.php (复制并粘贴显示出的ID)
此外可以在运行中的吉里吉里内核，用Shift+F4打开控制台并输入System.createUUID()，然后回车。这样也可以取得这种ID。
( 例 : "371a6289-a084-ee18-2885-66314a0aa19d" )</p>
<p>“存档文件格式”这一参数可以设置为“普通”，“加密”，“压缩”这三者中的一个。若设置为“加密”获“压缩”则无法直接看到存档文件中的内容。默认为“普通”</p>
<p>如果选中“保存宏定义”选项，则KAG的宏信息将被保存在存档中，一旦读取存档，则系统的宏定义将被恢复到保存时的样子。如果未选中这一选项，则KAG的宏定义将不会被保存，即使读取存档现在的宏定义也不会改变。对于每次在作品开始定义了所有宏的情况，为了开发中宏更新后不会受到存档里信息的影响，请不要选中这一选项。该选项默认为选中。</p>
<p>“存档数量上限”这一参数用来指定在菜单中显示的，用户可以选择的进度数量。通过 save 和 load 指令能够保存的进度数量对此设定没有影响。不用菜单管理进度时(在游戏画面中管理所有进度时)仍然需要设定必要的数量。默认为10</p>
<p>如果选中“存档时同时记录当前时间”选项，则会以进度名和 YY/MM/DD HH:MM的形式保存进度。</p>
<p>“文字显示速度”这组参数用来指定「高速」「普通」和「慢速」三种模式下的文字显示速度，单位为 毫秒/字。默认为30 60 100</p>
<p>“换页等待时间”这组参数用来指定自动模式下页末的等待时间，分为「短」「较短」「普通」「较长」和「长」五种类型。默认为400 700 1000 1300 2000</p>
<p>“换行等待时间”这组参数用来指定自动模式下行末的等待时间，分为「短」「较短」「普通」「较长」和「长」五种类型。默认为180 240 300 360 500</p>
<p>“鼠标指针”这组参数用来指定游戏中的鼠标指针(即光标)，可以分别对“通常”，“指向选项时”，“等待点击时”，“允许拖拽时”四种状态进行指定。从下拉列表中可以选择系统默认的鼠标指针，如果选中下拉列表中的最后一项，即“自定义光标”，则可以在后面的文字框中填写自己准备的鼠标指针文件的文件名。</p>
<p>如果选中“自动记录已读文章”选项，则每次通过标签时都会给系统变量中的“trail_剧本_剧本文件名_标签名”这个变量的值+1。比如first.ks中*start这个标签的话，对应的变量名称将是trail_first_start。此外，未通过的部分不会有变量与之对应。</p>
<p>
“通过标签”只是，结束了那个标签的内容，执行了其中的所有指令，进入了其他的标签，此时才会记录标签已通过。所谓“结束了那个标签的内容”，就是指以下的场合。这些场合下该标签将被标为“已读”。</p>
<p>
1)通过执行[s]命令而判断剧本到达终端。</p>
<p>
2)出现了下一个标签。</p>
<p>
3)通过jump指令跳跃。</p>
<p>
4)通过link和button指令跳跃到所指向的地方。</p>
<p>
5)执行return命令的时候。</p>
<p>( 请留意，即使文章没有表现出来，跳往分支的话也会变成「已读」
      参照link 和 button 指令的 countpage 属性 )</p>
<p>“通过记录的模式”这一参数可以设置为“手动”，“存档点”，“选项”这三者中的一个。选择“手动”则会关闭自动进行通过纪录的功能，但可以通过 record 指令手动进行通过记录。选择“存档点”可以自动对通过了能够保存的标签进行通过记录。选择“选项”则对分支选项(使用[s]指定停止)进行自动记录。</p>
<p>“通过记录数量上限”这一参数用来指定通过记录的最大数量。能够根据指定的数量最大限度回到之前的剧情。数目越大数据保存也越大。</p>
<p>如果选中“让quake的time属性兼容KAG 2.x ”选项，则quake的time属性单位以delay指定的文字速度为准。如果未选中这一选项，则以ms（毫秒）为准，为了与KAG 2.x 互換的话请指定该选项。默认设置为不选中。</p>
<p>“音效缓冲数量上限”这一参数用来指定利用可能的音效缓冲最大数量。只有在这里指定的数量的音效可以同时播放。如不使用音效指定为0也没关系。默认设置为3。</p>
<p>“视频对象数量上限”这一参数用来指定利用可能的视频对象最大数量。只有在这里指定的数量的视频对象可以同时播放。默认设置为1。</p>
<p>“默认的前景图层数”这一参数用来指定初期状态的前景层数量。如果非必要，指定为0也可以。如数量过多则会因为消耗资源而降低速度，故如无必要不指定数大量的数目。使用 [laycount] 指令也可以在脚本中更改。默认设置为3。</p>
<p>“前景图层位置标识对应的横坐标”这组参数用来指定前景层的位置标识(left、lecft_center 等)对应的中心位置 ( x 坐标 ) 位置标识依次为left，lecft_center，center，right_center，right。</p>
<p>“默认的文字层数”这一参数用来指定初期状态的文字层数量。与前景层不同，不能指定为0，应该确保必要的数量。可通过 laycount 指令在脚本中修改。默认设置为2。</p>
<p>如果选中“文字层默认可见”选项，则文字层0(message0)在初期状态下显示。如果未选中这一选项，则初期状态下所有的文字层都不显示。默认设置为选中。</p>
<p>如果选中“字体选择界面中只列出等宽字体”选项，则文字选择框只显示固定间距文字。默认设置为不选中。</p>
<p>“帮助文档的文件名”这一参数用来指定点击「帮助 &gt; 说明」菜单项时显示的内容所在的文件。必须把指定的文件和运行吉里吉里的文件放在同一目录下。默认设置为"readme.txt"</p>
<p>“[帮助-&gt;关于]对话框的尺寸”这组参数用来指定「帮助 &gt; 关于」窗口的领域尺寸。该窗口打开后将显示 about.ks 的内容。默认设置为宽度 320 高度 200</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-2-5"></a>2.5.2.5. “菜单”编辑界面</h4></div></div></div>
<p>如果选中“显示菜单栏”选项，则游戏会包含菜单，否则则不显示菜单。默认为选中。</p>
<p>其他各选项可设置各个子菜单是否可见。</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-2-6"></a>2.5.2.6. “文字层”编辑界面</h4></div></div></div>
<p>“显示模式”这一参数用来指定以何种模式显示文字层。其中ltAddAlpha 是 KAG3 3.23 beta 5 之后可以指定的模式，比ltAlpha 处理更快。 ltAlpha 是能够同以前的 KAG 互换的模式。若选择ltAddAlpha，则文字框图片也必须指定为可供ltAddAlpha模式使用的图片(不能自动识别)。ltAddAlpha 所用图片可用图片编辑工具制作。</p>
<p>“文字框图片文件”这一参数用来指定文字框图片的文件名。不填写这一参数则代表不使用文字框图片。如使用图片文字框后，用 position 指令调整文字层尺寸时可能会出现非正常显示情况。</p>
<p>“文字层颜色”这一参数用来以 0xRRGGBB 形式 ( RR GG BB  2位 的 16 进制) 指定文字层的颜色。“不透明度”则用 0 ～ 255 指定非透明度。指定文字框图片后则这两个设定无效。默认为 0x000000 和 128</p>
<p>“文字显示边距”这组参数用来指定文字层上下左右的文字显示边距，单位为像素。使用文字框图片时，需要将之设定在文字框的显示范围之内。分别对应 position 指令的 marginl, maringt, marginr, marginb 属性。默认值都为8</p>
<p>“默认位置”这一参数用来指定文字层的初期位置，单位为像素。分别对应 position 指令的 left top width height 属性。</p>
<p>如果选中“自动换页/换行”选项，则在行尾进行自动换行，在页尾自动进行换页。默认为选中。</p>
<p>“换行判断时行末的禁则判断长度”这一参数用来指定文字层在换行判断时对行末的禁则字符(如“《 〈 “ (”等)进行强制换行显示的判断长度。默认为2。</p>
<p>“字体”这一参数用来指定默认的字体名。该设定能够继承系统变数的记录，在下次启动时继续显示。改变、适应 userFace 的设定时，需删除系统变数文件 ?????sc.kdt 的 "chdefaultFace" 行。能够用小数点区分来指定复数的字体，该情况下，第一个字体作为优先处理。</p>
<p>“字符尺寸”这一参数用来以 pixel(像素) 单位指定默认的文字尺寸 ( 高度 )。相当于 deffont 指令的 size 属性。默认为24。</p>
<p>“行间距”这一参数用来以 pixel(像素) 单位指定行距。 相当于 defstyle 指令的 linespacing 属性。默认为6。</p>
<p>“字间距”这一参数用来以 pixel(像素) 单位指定文字间距。相当于 defstyle 指令的 pitch 属性。默认为0，可以设定正负。负数时文字变得紧凑，正数时文字变得宽松。</p>
<p>“文字颜色”这一参数用来以 0xRRGGBB 形式指定默认文字颜色。相当于 deffont 指令的 color 属性。默认为0xffffff (白色)</p>
<p>如果选中“加粗”选项，则文字会以粗体显示。相当于 deffont 指令的 bold 属性。默认为不选中。</p>
<p>“振假名的尺寸”这一参数用来以 pixel(像素) 单位指定振假名(即文字上方标注拼写方式的小号字符)的大小。相当于 deffont 指令的 rubysize 属性。默认为10。后面的“相对位置”则以 pixel(像素) 为单位，指定振假名与下方文字的距离，数字越小则距离越小，可以为负值。默认为-2</p>
<p>“开启文字显示平滑处理功能”选项可以开启相应的功能，可以视需要而设置。</p>
<p>如果选中“显示文字阴影”选项，则显示文字的同时会显示该文字的阴影(相当于 deffont 指令的 shadow 属性 默认为选中)，可以通过设置后面的“颜色”文字框的值(以 0xRRGGBB 的形式)来设定阴影的颜色(相当于 deffont 指令的 shadowcolor 属性 默认为0x000000)。</p>
<p>如果选中“显示文字边缘”选项，则显示文字的同时会显示该文字的边缘(相当于 deffont 指令的 edge 属性 默认为不选中)，可以通过设置后面的“颜色”文字框的值(以 0xRRGGBB 的形式)来设定边缘的颜色(相当于 deffont 指令的 edgecolor 属性 默认为0x000000)。自KAG3 之后，不能同时使用边缘和阴影，指定边缘时则优先进行边缘处理。</p>
<p>“换行等待提示符的图片文件名”和“换页等待提示符的图片文件名”两个参数用来指定行尾点击等待提示符和页尾点击等待提示符的图片资源文件名(不包含扩展名)。相关资源文件请参照动画层 ( AnimationLayer.tjs ) 的说明制作。需指定色键时，请在脚本中用 glyph 指令指定。相当于 glyph 指令的 line 属性 和 page 属性。默认为"LineBreak"和"PageBreak"。</p>
<p>如果选中“在固定位置显示点击等待提示符”选项(相当于 glyph 指令的 fix 属性 默认为不选中)，则在后面的X(横坐标 相当于 glyph 指令的 left 属性 默认为0)和Y(纵坐标 相当于 glyph 指令的 top 属性 默认为0)两个文字框中设定的位置显示点击等待提示符。若未选中，则在当前行行末显示点击等待提示符。</p>
<p>“选项栏的强调颜色”这一参数用来指定选择选项栏后，半透明矩形的默认颜色。相当于 link 指令的 color 属性。默认为0x0080ff</p>
<p>“选项栏的不透明度”这一参数用来指定选择选项栏后，半透明矩形的非透明度。默认为64</p>
<p>如果选中“文字竖排模式”选项，则文字层中的文字都会按照竖排显示。相当于 position 指令的 vertical 属性。默认为不选中。</p>
<p>如果选中“允许文字层的鼠标拖拽”选项，则文字边距界限外的部分，文字框图片非透明度 64 以上的地方，可以使用鼠标移动文字层。默认为不选中。</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-2-7"></a>2.5.2.7. “声音”编辑界面</h4></div></div></div>
<p>“BGM播放媒体”这一参数用来指定使用哪种音频格式。可选的参数有“Wave”，“MIDI”，“CDDA”三种。默认为“Wave”。</p>
<p>“BGM用CD的来源标签”这一参数用来指定播放CD音轨的来源标签，而非音量来源的编号。默认为"xxxx"。</p>
<p>如果选中“开启交叉定位”选项，则可以准备两个声音缓冲进行交叉定位。使用MIDI声音缓冲且不希望进行复数数据同时播放以及使用 CDDA 声音缓冲时，请不要选中该选项。默认为不选中。</p>
<p>“MIDI播放之前送入的讯息”这一参数用来指定MIDI 数据播放前送往 MIDI 音源的讯息。
</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-2-8"></a>2.5.2.8. “文字履历”编辑界面</h4></div></div></div>
<p>“字体名称”这一参数用来指定文字履历层中文字的字体。</p>
<p>如果选中“加粗”选项，则文字履历层中的文字会以粗体显示。默认为选中。</p>
<p>“字符尺寸”这一参数用来指定文字履历层中文字的高度(单位:像素)。默认为24</p>
<p>“行高”这一参数用来指定文字履历层中文字行的高度(单位:像素)。默认为26</p>
<p>如果选中“竖排显示”选项，则文字履历层中的文字会按照竖排显示。默认为不选中。</p>
<p>如果选中“以页为单位进行阅览”选项，则文字履历层中的文字会以[cm] [ct] [er] 指令或 [repage] 属性变为 true 的 [hr] 指令进行文字履历的换页，此时可通过后面的“履历保存最大页数”参数来设置页的最大保存数量(默认为100页)。如果不选中该选项则以行为单位阅览，此时可以通过后面的“履历保存最大行数”参数来设置行的最大保存数量(默认为2000行)。默认为不选中。</p>
<p>选中“自动换行”选项则可开启文字履历层中的文字显示的自动换行功能。默认为选中。</p>
<p>如果选中“存档时保存履历信息”选项，则在进度中保存文字履历，但进度数据会增大。默认为不选中。</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-2-9"></a>2.5.2.9. 用户追加参数编辑界面</h4></div></div></div>
<p>这一界面用于编辑“全局”、“窗口与系统”、“菜单”、“文字层”、“声音”、“文字履历”这六个模块的用户追加参数。当前的编辑对象模块可以用“用户追加参数”后面的下拉列表来切换。</p>
<p>分为三列并依次命名为“参数名”、“值”和“行末注释”的列表框用来显示当前的编辑对象模块中现有的用户追加参数。当选中其中的某一个参数时，这个参数的名称、值和行末注释会分别显示在下放的三个文字框中。</p>
<p>修改三个文字框的值并点击“添加/修改”按钮，如果“参数名”文字框的值和列表框中的任何一行的“参数名”列的值都不同，则会把这组值添加到列表框中，否则则会用“值”和“行末注释”文字框的内容来替换列表框中和“参数名”文字框的值相同的行的“值”和“行末注释”这两列。</p>
<p>点击“删除”按钮可以删除当前选中的列表框中的行。</p>
</div>
</div>
<div class="sect2" lang="zh-CN">
<div class="titlepage"><div><div><h3 class="title">
<a name="ch02-5-3"></a>2.5.3. CaptainsKnife 使用说明</h3></div></div></div>
<p>这个工具要求Win2000或以上操作系统，1024x768或以上分辨率，DirectX8.0或以上。</p>
<div><img src="figure/CaptainsKnife1.png"></div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-3-1"></a>2.5.3.1. 启动界面</h4></div></div></div>
<div class="sect4" lang="zh-CN">
<div class="titlepage"><div><div><h5 class="title">
<a name="ch02-5-3-1-1"></a>2.5.3.1.1. 菜单</h5></div></div></div>
<p>这个工具集成了不只一个功能，用菜单可以在不同功能之间切换。</p>
</div>
<div class="sect4" lang="zh-CN">
<div class="titlepage"><div><div><h5 class="title">
<a name="ch02-5-3-1-2"></a>2.5.3.1.2. 预览窗口</h5></div></div></div>
<p>这个工具的编辑过程是所见即所得的，每一个编辑操作都会在预览窗口中立即看到效果。如果实际编辑内容比该窗口大，可以通过该窗口右侧和下方的滚动条来调节位置。该预览窗口默认为640x480，在显示器分辨率较高的时候，该预览窗口会随之加大，在1280x960的显示器上会变为800x600，更高分辨率下会达到1024x768。</p>
</div>
<div class="sect4" lang="zh-CN">
<div class="titlepage"><div><div><h5 class="title">
<a name="ch02-5-3-1-3"></a>2.5.3.1.3. 放大倍数</h5></div></div></div>
<p>通过这个下拉列表可以随时让预览窗口在原尺寸，两倍放大，四倍放大，八倍放大之间切换。</p>
</div>
<div class="sect4" lang="zh-CN">
<div class="titlepage"><div><div><h5 class="title">
<a name="ch02-5-3-1-4"></a>2.5.3.1.4. 时间轴</h5></div></div></div>
<p>在某些功能里需要对时间间隔等参数进行设置，这个轴就是干这个用的。</p>
</div>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-3-2"></a>2.5.3.2. 字符卡编辑界面</h4></div></div></div>
<p>1.点载入字符卡图片按钮可以载入一张已经画好了的字符卡(bmp或jpg或png)，例如下面这张：
					</p>
<div><img src="figure/CaptainsKnife2.png"></div>
<p>2.点保存按钮可以把当前编辑的数据保存为一个.acd文件并放在字符卡图片的同一文件夹下，文件名和载入的图片文件名相同。以后再次载入该图片时将同时载入这个文件，再现当时保存的数据。该文件无法被KrKr或其他工具读取。</p>
<p>3.点导出按钮可以将当前编辑的数据导出为一个.kad文件并放在字符卡图片的同一文件夹下，文件名和载入的图片文件名相同。该文件可以被配套的KrKr用字符图片映射插件读取。具体使用方法见插件内的说明。</p>
<p>4.字符列表中显示当前各个字符对应的图片中的坐标。下面的添加/修改和删除两个按钮的操作对象就是该下拉列表当前选中的字符。</p>
<p>
5.如果字符卡图片的各个符号的宽度，高度，水平间隔和垂直间隔都相同，就可以选中“分布规则”这个选项，如果字符卡图片的各个符号严格按照ASCII码表的顺序排列，就可以选中“排列有序”这个选项。上面的那张图满足这两个条件。</p>
<p>
6.这里可以设置符卡图片的各个符号的位置参数。如果分布不规则，则必须为每一个符号设置左上角横坐标(x)纵坐标(y)宽度和高度，反之如果分布规则，则可以同时设置水平和垂直间距以及数量，此时全部符号共用一套坐标参数。</p>
<p>
7.如果分布不规则，点添加/修改按钮会将当前坐标参数设置到字符列表中选中的字符上。如果分布规则但排列无序，则预览窗口中会出现各个符号的序号，在“图像单元序号”后面的输入框中填入序号，点添加/修改按钮就可以把对应序号的坐标参数设置到字符列表中选中的字符上。如果字符卡同时满足分布规则和排列有序，就可以一次提交全部字符的坐标参数。</p>
<p>
8.点删除按钮可以清除当前选中的字符的坐标参数。</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-3-3"></a>2.5.3.3. 动画脚本编辑器</h4></div></div></div>
<p>上面这个是动画脚本的编辑界面。KrKr中的图片模拟动画显示有两种模式，具体的说明可以在AnimationLayer.tjs里查到。在这里将只使用1张图片的方式称为clip方式，另一种称为cell模式。</p>
<div><img src="figure/CaptainsKnife3.png"></div>
<p>1.点加载图片按钮可以载入用于动画显示的图片。在载入图片之后，该工具会检测是否有对应的(默认命名方式的)cell图片存在，例如，加载的 base图片为image01.bmp，则会依次检测image01_a.png，image01_a.bmp，image01_a.jpg，如果检测到则认为是cell模式，否则认为是clip模式。如果认定为cell模式，则在坐标模式中显示的是cell图片(xxx_a)。</p>
<p>
2.该功能的编辑模式分为三种，坐标模式，时间轴模式和测试模式。可以用这个下拉列表来切换。</p>
<p>
3.在坐标模式下，可以在这里设置图片的切割参数。</p>
<p>
4.填写一个Segment标签之后点添加/修改按钮，如果下面的Segment列表中没有该Segment标签的话，会依照上面的切割参数向Segment列表中添加一个Segment标签，否则会修改已有的Segment标签。</p>
<p>
5.点删除按钮可以删除下面的Segment列表中选中的Segment标签(及其对应的所有数据)。
</p>
<p>
6.Segment列表，可以在这里切换编辑的对象。
</p>
<p>
7.设置当前Segment的时间轴长度，并指定是否循环。填入参数后点设置按钮，预览窗口下方的时间轴就会被设置为指定的长度。</p>
<p>
8.向时间轴的游标所在的时刻添加一个“关键帧”，或修改已有的关键帧。此时应切换到时间轴编辑模式。可以随时切换到测试模式测试当前Segment的实际效果。</p>
<p>
9.点保存按钮可以把当前编辑的数据保存为一个.kasd文件并放在字符卡图片的同一文件夹下，文件名和载入的图片文件名相同。以后再次载入该图片时将同时载入这个文件，再现当时保存的数据。该文件无法被KrKr或其他工具读取。</p>
<p>
10.点导出按钮可以将当前编辑的数据导出为一个.asd文件，即动画脚本文件并放在字符卡图片的同一文件夹下，文件名和载入的图片文件名相同。</p>
</div>
<div class="sect3" lang="zh-CN">
<div class="titlepage"><div><div><h4 class="title">
<a name="ch02-5-3-4"></a>2.5.3.4. textset.ks编辑器</h4></div></div></div>
<div><img src="figure/CaptainsKnife4.png"></div>
<p>
					这个是textset.ks文件的编辑界面，只是输出的文字层风格的宏还无法带参数。</p>
<p>
1.导入textset.ks文件。这不是必须的。</p>
<p>
2.选择该文件对应的游戏工程的窗口尺寸(1024x768请慎用)。如果预览窗口的尺寸小于这一设置，则预览窗口旁边的滚动条会帮您调节显示区域 (如果您在1024x768的显示器上设置了800x600的选项就会这样，但是如果您用的是1280x960的显示器，则预览窗口为800x600，可以完全显示这一设置的预览图像，依此类推)。
</p>
<p>
3.点导出按钮可以导出textset.ks文件。如果之前没有导入，则生成的文件会放在该工具的同一文件夹下，否则会覆盖原来的文件。</p>
<p>
4.文字层风格的各项参数，对应那个叫position的TAG。注意，如果导入的文件包含文字框图片的文件名，本工具并不能自动加载该文件并显示在预览窗口中，这可以由您再次点载入按钮加载进来。
</p>
<p>
5.其实那名称应该是注释。下面的宏标识才是写在“@macro name=”后面的东西。</p>
<p>
6.依上面的参数添加一个文字层风格宏，或修改现有的。</p>
<p>
7.删除选中的宏</p>
<p>
8.文字层风格宏的列表。</p>
</div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch02-4.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch02.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="ch02-6.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">2.4. KAG的图层结构 </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 2.6. 关于KAG工程的一些说明</td>
</tr>
</table>
</div>
</body>
</html>
