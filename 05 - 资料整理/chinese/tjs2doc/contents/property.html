<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh">
<!-- generated by to_html.pl from property.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>属性(property)</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="åéåéç¸å³æ ååèæ ·å¼" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="é¦é¡µ" />
</head>
<body>
<h1><a id="id276" name="id276">属性(property)</a>
</h1><div class="para"><div>
　属性可以像变量那样进行读写，但实际上，在读写时会像调用函数那样调用<a id="id277" name="id277" class="targanchor"><dfn>设置函数</dfn></a> ( <a id="id278" name="id278" class="targanchor"><dfn>setter</dfn></a> ) 和<a id="id279" name="id279" class="targanchor"><dfn>读取函数</dfn></a> ( <a id="id280" name="id280" class="targanchor"><dfn>getter</dfn></a> ) 。设置函数 和 读取函数有时也被称为 属性控制器。<br />
<br />
　定义格式如下。<br />

<br />
<code class="bq"><a id="id281" name="id281" class="targanchor"><dfn>property</dfn></a>&nbsp;标识符<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;setter(参数)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;这里是设定函数的内容</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;getter()<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;这里是读取函数的内容</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;表达式;&nbsp;<span class="comment">//&nbsp;读取函数的返回值</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
}<br />
</code>
<br />

　把 setter 和 getter 的书写顺序反过来也没问题。 <br />
　即使在类中定义了 property 或者把属性注册为全局对象的成员，属性标识符中的值也要通过读取函数来取得，通过设置函数来设置。设置函数和读取函数和方法一样可以包含各种各样的内容。设置函数通过写在 setter 后面的 ( ) 里的参数来接受变量作为属性的值。读取函数通过 <a id="id282" name="id282" class="targanchor"><dfn>return</dfn></a> 语句将属性的值返回。<br />
<br />
　getter后面的 () 可以省略。 <br />
<br />
　如果将对应一个标识符的设置函数和读取函数都写出来，这个标识符就成了即可读又可写的属性。如果只写出其中一个，例如只写了读取函数的时候，这个标识符就成了只读属性了，对它进行写入时会产生错误。<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;value;<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;property&nbsp;property1&nbsp;<span class="comment">//&nbsp;声明属性&nbsp;'property1'&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setter(v)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;设置函数只接受一个参数</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value=v;&nbsp;<span class="comment">//&nbsp;处理参数&nbsp;v&nbsp;</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;value&nbsp;set.&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;声明&nbsp;'property1'&nbsp;的读取函数</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;读取函数没有参数</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;value&nbsp;get.&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;value;&nbsp;<span class="comment">//&nbsp;把&nbsp;value&nbsp;作为返回值</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;property1=5;&nbsp;<span class="comment">//&nbsp;向&nbsp;property1&nbsp;带入数值会调用读取函数</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;property1++;&nbsp;<span class="comment">//&nbsp;像这样的表达式会先调用读取函数，</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;然后调用设置函数来设置新值。</span><br />
}<br />
</code>
<br />

　属性也和变量、函数、类一样，可以被覆盖。<br />
</div></div>
<h1><a id="id283" name="id283">属性对象(property object)</a>
</h1><div class="para"><div>
　属性本身也是一个对象。但是，无论注册到什么对象中，普通的操作方式只是会调用属性控制器，而无法对属性对象本身进行操作。<br />
　使用 <code class="inlinecode"><a id="id284" name="id284" class="targanchor"><dfn>&amp;</dfn></a></code> 运算符可以取出属性对象。取出的属性对象能够代入到局部变量中。<br />
　还有，使用 <code class="inlinecode">&amp;</code> 运算符也可以把属性对象注册到别的对象中。<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;property&nbsp;prop&nbsp;<span class="comment">//&nbsp;声明属性&nbsp;prop&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(略)<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;p&nbsp;=&nbsp;&amp;prop;&nbsp;<span class="comment">//&nbsp;获得属性对象并将其代入到局部变量中</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&amp;object.property1&nbsp;=&nbsp;p;&nbsp;<span class="comment">//&nbsp;将&nbsp;p&nbsp;注册为&nbsp;object&nbsp;的&nbsp;property1&nbsp;</span><br />
}<br />
</code>
<br />

<br />
　使用 <code class="inlinecode">&amp;</code> 运算符可以不触动读取函数和设置函数，直接对属性对象本身进行操作。不使用 <code class="inlinecode">&amp;</code> 运算符的话，则是对属性的普通的操作(读或写)。<br />
<br />
　已经被取出并变为局部变量的的属性对象，虽然没有注册到某个对象中，但是使用 <code class="inlinecode"><a id="id285" name="id285" class="targanchor"><dfn>*</dfn></a></code> 运算符仍可以调用它的属性控制器。<br />
<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;property&nbsp;prop&nbsp;<span class="comment">//&nbsp;声明属性&nbsp;prop&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(略)<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;p&nbsp;=&nbsp;&amp;prop;&nbsp;<span class="comment">//&nbsp;获得属性对象并将其代入到局部变量中</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;*p&nbsp;=&nbsp;30;&nbsp;<span class="comment">//&nbsp;调用&nbsp;setter&nbsp;将属性的值设定为&nbsp;30&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;func(*p);&nbsp;<span class="comment">//&nbsp;调用&nbsp;getter&nbsp;获得属性的值并传入&nbsp;func&nbsp;函数</span><br />
}<br />
</code>
<br />

<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
像上面那样使用 var 变量保存属性对象时，请使用局部变量。这是因为，属性对象一旦注册到某个对象中，它就不会作为属性对象，而是作为属性经由读取函数和设置函数来工作。换句话说，不作为局部变量，而是作为全局变量(＝global的成员)或者对象的成员来注册的话，它就会像普通的属性那样工作。当然，可以使用 &amp; 运算符把注册为全局变量或对象的成员的属性对象取出来。</div><br />
<br />
对属性对象使用 instanceof 运算符和 &quot;Property&quot; 操作数，结果为真(以上面那个为例，&amp;prop instanceof &quot;Property&quot; 的值为真)。<br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
