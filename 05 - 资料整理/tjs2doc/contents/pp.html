<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh">
<!-- generated by to_html.pl from pp.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>预处理指令(preprocessor)</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="åéåéç¸å³æ ååèæ ·å¼" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="é¦é¡µ" />
</head>
<body>
<h1><a id="id270" name="id270">预处理指令(preprocessor)</a>
</h1><div class="para"><div>
　TJS2 可以对 <a id="id271" name="id271" class="targanchor"><dfn>条件编译表达式</dfn></a> ( 相当于 C 中的 #if 和 #endif 的东西 ) 进行处理。也就是说，可以在脚本(script)被实际执行之前进行处理，依照条件只解释脚本中想要解释的一部分，而对其他部分不进行解释。<br />
　件编译表达式的书写风格和 C 中的预处理指令不同，是在哪里都能写的自由风格。并不是像 C 中那样每行只能写一条指令。<br />
</div></div>
<h1><a id="id272" name="id272">@set 指令</a>
</h1><div class="para"><div>
　@set 指令会对条件编译表达式求值，并将结果忽略掉。格式如下。
<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;@set(表达式)<br />
</code>
<br />

　在“表达式”那个位置书写条件编译表达式。这里可以使用下面的这些运算符。<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;=&nbsp;&nbsp;!=&nbsp;&nbsp;==&nbsp;&nbsp;||&nbsp;&nbsp;&amp;&amp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;&nbsp;&amp;&nbsp;&nbsp;&lt;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&lt;=&nbsp;&nbsp;&gt;=&nbsp;&nbsp;+&nbsp;&nbsp;-&nbsp;&nbsp;%&nbsp;&nbsp;*&nbsp;&nbsp;/&nbsp;&nbsp;!&nbsp;&nbsp;+&nbsp;&nbsp;-&nbsp;&nbsp;(&nbsp;)<br />
</code>
<br />

　这些运算符的作用请参考 <a target="main" class="jump" href="expr_and_op.html">表达式和运算符</a> 。但是，条件编译表达式中只能处理整数。<br />
　可以使用任意的变量和常量。变量名的命名和 <a target="main" class="jump" href="token.html">记号</a> 中的变量和常量适用相同的命名规则。<br />
　但是，预处理指令中使用的变量和 TJS2 脚本中使用的变量名并不互相影响 ( 并不共享同一个名字空间 )。<br />
</div></div>
<h1><a id="id273" name="id273">@if 指令, @endif 指令</a>
</h1><div class="para"><div>
　@if 会对条件编译表达式求值，结果为 0 的话，到下一个 @endif 为止，这之间的脚本不会被解释。结果不是 0 则会解释这些脚本。<br />
　格式如下。<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;@if(表达式)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
</code>
<br />

&nbsp;&nbsp;&nbsp;&nbsp;在“表达式”那个位置指定条件编译表达式。 @if ～ @endif 可以欠套。<br />
<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;@if(flag==0)&nbsp;&nbsp;<span class="comment">//&nbsp;还没有被代入任何值的变量在这里会被看作是&nbsp;0</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@set(flag=1)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;****<br />
&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp;&nbsp;写在&nbsp;****&nbsp;部分的脚本只会被解释一次</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;@if(version&gt;=0x02040009)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@if(flag)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;****<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
&nbsp;&nbsp;&nbsp;&nbsp;@endif&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp;version&nbsp;在&nbsp;0x02040009&nbsp;(2.4.9)&nbsp;以上且&nbsp;flag&nbsp;不为&nbsp;0&nbsp;的时候会解释&nbsp;****&nbsp;部分的脚本</span><br />
</code>
<br />

</div></div>
<h1><a id="id274" name="id274">已定义的变量</a>
</h1><div class="para"><div>
　<a id="id275" name="id275" class="targanchor"><dfn>version</dfn></a> 变量代表当前的 TJS2 的版本。<br />
<br />
　该变量为16进制的 0x0XYYZZZZ 形式的数值， X 的部分是主版本号，YY 的部分是副版本号， ZZZZ 是发布序号。例如 0x02040009 的话，版本就是 2.4.9 。</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
